C51 COMPILER V9.53.0.0   MAIN                                                              04/16/2021 23:35:55 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\keil5-MDK\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\ma
                    -in.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          //蓝桥杯大赛-单片机组demo
   2          //作者：coresic
   3          
   4          #include <STC15F2K60S2.H>
   5          
   6          #define uchar unsigned char
   7          #define uint unsigned int
   8                  
   9          uchar WEI[8];//数码管显示值缓存
  10          uchar DUAN[10]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90};//数码管段码
  11          uchar index;//数码管显示位置
  12          
  13          void Enable38(uchar num)//38译码器
  14          {
  15   1              P2&=0x1f;
  16   1              P2|=num<<5;
  17   1      }
  18          
  19          void Timer0_Init()//定时器0初始化
  20          {
  21   1              TMOD=0x01;
  22   1              TH0=-9;
  23   1              TL1=0;
  24   1              TR0=1;
  25   1              ET0=1;
  26   1              EA=1;
  27   1      }
  28          
  29          void Display_init()//数码管初始化
  30          {
  31   1              WEI[0]=DUAN[0];
  32   1              WEI[1]=DUAN[1];
  33   1              WEI[2]=DUAN[2];
  34   1              WEI[3]=DUAN[3];
  35   1              WEI[4]=DUAN[4];
  36   1              WEI[5]=DUAN[5];
  37   1              WEI[6]=DUAN[6];
  38   1              WEI[7]=DUAN[7];
  39   1      }
  40          
  41          void Display()//数码管显示
  42          {
  43   1              Enable38(6);
  44   1              P0=(0x01<<index);
  45   1              Enable38(7);
  46   1              P0=(WEI[index]);
  47   1              index++;
  48   1              index&=7;
  49   1      }
  50          
  51          void LED8_ON(uchar num)//流水灯开
  52          {
  53   1              Enable38(4);
  54   1              if(num<=7)
C51 COMPILER V9.53.0.0   MAIN                                                              04/16/2021 23:35:55 PAGE 2   

  55   1              P0&=~(0x01<<num);
  56   1              else
  57   1              P0=0X00;
  58   1      }
  59          
  60          void LED8_OFF(uchar num)//流水灯关
  61          {
  62   1              Enable38(4);
  63   1              if(num<=7)
  64   1              P0|=0x01<<num;
  65   1              else
  66   1              P0=0Xff;
  67   1      }
  68          
  69          void main()//主函数
  70          {
  71   1              Display_init();
  72   1              Timer0_Init();
  73   1              LED8_OFF(8);
  74   1              while(1)
  75   1              {
  76   2              
  77   2              }
  78   1      }
  79          
  80          void Timer0() interrupt 1//定时器0中断
  81          {
  82   1              TH0=-9;
  83   1              Display();
  84   1      }
  85          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    197    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     19    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
